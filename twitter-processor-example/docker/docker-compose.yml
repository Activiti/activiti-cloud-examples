version: '2'
services:
  rabbitmq:
    image: rabbitmq:management
    ports:
      - "5672:5672"
      - "15672:15672"
  activiti-cloud-sso-idm:
    image: activiti/activiti-cloud-sso-idm:latest
    ports:
      - "8180:8180"
  my-maven-runtime-bundle:
      # Set image: to whichever you are using
      # This image was generated by the docker-runtime-bundle/Dockerfile
      image: my-maven-runtime-bundle
      # This image was generated by the maven-runtime-bundle project
      #image: rb-my-maven-app
      depends_on:
        - rb-postgres
      # You can launch as many Runtime Bundles as you want by changing these Env variables
      environment:
        - ACT_RB_PORT=8081
        - ACT_RB_HOST=my-maven-runtime-bundle
        - ACT_RB_APP_NAME=my-maven-runtime-bundle
        - ACT_RB_DB_URI=jdbc:postgresql://rb-postgres:5432/activitidb
        - ACT_RB_DB_USER=postgres
        - ACT_RB_DB_PASS=password
        - ACT_RB_DB_PLATFORM=org.hibernate.dialect.PostgreSQLDialect
      ports:
      - "8081:8081"
  # We decided to configure our runtime bundle against a PostgreSQL instance
  rb-postgres:
      image: postgres
      ports:
       - "5432:5432"
      environment:
        - POSTGRES_PASSWORD=password
        - POSTGRES_USER=postgres
        - POSTGRES_DB=activitidb
